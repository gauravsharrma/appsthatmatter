<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic Meta & SEO -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AppsThatMatter</title>
  <meta name="description" content="Quick, Meaningful AppsThatMatter—Fueling Productivity & Uplifting Lives. A collection of purposeful web apps for global users.">
  <meta name="keywords" content="web apps, productivity tools, EMI calculator, Markdown reader, global productivity">
  <link rel="canonical" href="https://appsthatmatter.onrender.com/">

  <!-- Open Graph -->
  <meta property="og:title" content="AppsThatMatter">
  <meta property="og:description" content="Quick, Meaningful AppsThatMatter—Fueling Productivity & Uplifting Lives.">
  <meta property="og:image" content="https://appsthatmatter.onrender.com/og-image.png">
  <meta property="og:url" content="https://appsthatmatter.onrender.com/">
  <meta property="og:type" content="website">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@YourTwitterHandle">
  <meta name="twitter:title" content="AppsThatMatter">
  <meta name="twitter:description" content="Quick, Meaningful AppsThatMatter—Fueling Productivity & Uplifting Lives.">
  <meta name="twitter:image" content="https://appsthatmatter.onrender.com/twitter-image.png">

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Organization",
        "name": "AppsThatMatter",
        "url": "https://appsthatmatter.onrender.com/",
        "logo": "https://appsthatmatter.onrender.com/logo.png",
        "sameAs": [
          "https://twitter.com/YourTwitterHandle",
          "https://www.linkedin.com/company/appsthatmatter"
        ]
      },
      {
        "@type": "WebSite",
        "url": "https://appsthatmatter.onrender.com/",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://appsthatmatter.onrender.com/?s={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      },
      {
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://appsthatmatter.onrender.com/"
          }
        ]
      }
    ]
  }
  </script>

  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-XXXXXXX');
  </script>
  <!-- End Google Tag Manager -->

  <!-- Google Analytics (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YYYYYYYYYY"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-YYYYYYYYYY');
  </script>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-indigo-100 via-white to-pink-100 text-gray-800 antialiased min-h-screen flex flex-col">
  <div class="w-full bg-white/80 backdrop-blur shadow-sm sticky top-0 z-10">
    <div class="container mx-auto flex items-center justify-between py-4 px-4">
      <a href="/" class="flex items-center space-x-2 group">
        <img src="/logo.png" alt="AppsThatMatter Logo" class="h-9 w-9 drop-shadow-md group-hover:scale-110 transition-transform">
        <span class="font-extrabold text-2xl text-indigo-600 tracking-tight group-hover:text-pink-500 transition-colors">AppsThatMatter</span>
      </a>
      <button id="subscribe-btn" class="bg-gradient-to-r from-indigo-500 to-pink-500 text-white px-5 py-2 rounded-xl font-semibold shadow hover:from-pink-500 hover:to-indigo-500 transition" data-ab-test="subscribe_cta">Subscribe</button>
    </div>
  </div>
  <main class="container mx-auto px-4 py-10 flex-1">
    <header class="mb-10 text-center">
      <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight text-indigo-700 mb-2">AppsThatMatter</h1>
      <p class="text-gray-600 text-lg max-w-2xl mx-auto">Quick, Meaningful AppsThatMatter—Fueling Productivity & Uplifting Lives.</p>
      <p class="mt-4 text-sm">Invite a friend: <a href="#" id="referral-link" class="text-indigo-600 hover:underline font-semibold">Share your code</a></p>
    </header>
    <div class="mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
      <input id="search-input" type="text" placeholder="🔍 Search web apps..." class="w-full sm:w-1/2 px-4 py-3 border-2 border-indigo-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-200 focus:border-pink-400 transition" />
      <select id="category-filter" class="w-full sm:w-auto px-4 py-3 border-2 border-indigo-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-pink-200 focus:border-pink-400 transition">
        <option value="All">All Categories</option>
      </select>
    </div>
    <main id="app-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
      <!-- Cards rendered by JS -->
    </main>
    <section id="recommended" class="mt-12 hidden">
      <h2 class="text-2xl font-semibold mb-4">Recommended for You</h2>
      <div id="recommended-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </section>
    <section id="comments" class="mt-12">
      <h3 class="text-xl font-semibold mb-4">Community Feedback</h3>
      <p class="text-gray-500">Comments section coming soon. Share your thoughts!</p>
    </section>
  </main>
  <footer class="bg-white/80 backdrop-blur text-center text-xs text-gray-400 py-4 border-t">&copy; 2025 AppsThatMatter. Fueling Productivity & Uplifting Lives.</footer>
  <style>
    .rounded-xl { border-radius: 1.25rem !important; }
    .rounded-3xl { border-radius: 1.5rem !important; }
    .shadow-2xl { box-shadow: 0 10px 40px 0 rgba(80,0,120,0.10) !important; }
    .shadow-lg { box-shadow: 0 4px 24px 0 rgba(80,0,120,0.08) !important; }
    .animate-fade-in { animation: fadeIn 0.7s cubic-bezier(.4,0,.2,1) both; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px);} to { opacity: 1; transform: none;} }
  </style>

  <script>
    const apps = [
      {
        name: 'EMI Calculator',
        description: 'Calculate your monthly EMI effortlessly.',
        icon: `<svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-indigo-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                   d="M8 2h8a2 2 0 012 2v16a2 2 0 01-2 2H8a2 2 0 01-2-2V4a2 2 0 012-2z" />
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                   d="M8 6h8M8 10h8M8 14h8M8 18h8" />
               </svg>`,
        category: 'Finance',
        url: '/emi-calculator'
      },
      {
        name: 'Markdown Reader',
        description: 'Preview and read Markdown files with ease.',
        icon: `<svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-green-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                   d="M7 8h10M7 12h4m-4 4h10" />
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                   d="M5 3h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2z" />
               </svg>`,
        category: 'Utility',
        url: '/markdown-reader'
      },
      {
        name: 'BMI Calculator',
        description: 'Check your Body Mass Index and health category instantly.',
        icon: `<svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-pink-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="12" r="10" stroke-width="2"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 15s1.5-2 4-2 4 2 4 2"/></svg>`,
        category: 'Health',
        url: '/bmi-calculator'
      }
    ];

    // Build referral code
    let refCode = localStorage.getItem('refCode');
    if (!refCode) {
      refCode = Math.random().toString(36).substring(2, 8).toUpperCase();
      localStorage.setItem('refCode', refCode);
    }

    function populateCategoryFilter() {
      const select = document.getElementById('category-filter');
      const cats = ['All', ...new Set(apps.map(a => a.category))];
      cats.forEach(c => {
        const opt = document.createElement('option');
        opt.value = c;
        opt.textContent = c;
        select.appendChild(opt);
      });
    }

    function renderApps() {
      const grid = document.getElementById('app-grid');
      const term = document.getElementById('search-input').value.toLowerCase();
      const category = document.getElementById('category-filter').value;
      grid.innerHTML = '';

      dataLayer.push({ event: 'filter', category, search: term });

      const filtered = apps.filter(app => {
        const okSearch = app.name.toLowerCase().includes(term)
                       || app.description.toLowerCase().includes(term);
        const okCat = category === 'All' || app.category === category;
        return okSearch && okCat;
      });

      if (!filtered.length) {
        grid.innerHTML = `<p class="col-span-full text-center text-gray-500">No apps found.</p>`;
        return;
      }

      filtered.forEach(app => {
        const card = document.createElement('div');
        card.className = 'bg-white rounded-lg shadow-sm p-6 flex flex-col hover:shadow-lg transition-shadow';
        card.innerHTML = `
          <div class="flex-shrink-0">${app.icon}</div>
          <h2 class="text-xl font-semibold mb-2">${app.name}</h2>
          <p class="text-gray-600 flex-grow">${app.description}</p>
          <span class="inline-block bg-gray-200 text-gray-800 text-xs font-medium px-2 py-1 rounded-full mt-4">
            ${app.category}
          </span>
          <a href="${app.url}.html"
             class="mt-4 inline-block text-indigo-600 hover:underline font-medium"
             target="_blank" rel="noopener noreferrer"
             onclick="dataLayer.push({ event: 'app_click', app: '${app.name}' });">
            Open App →
          </a>
          <div class="mt-4 flex space-x-3">
            <a href="https://twitter.com/intent/tweet?text=${encodeURIComponent(app.name + ' at ' + window.location.origin + app.url + '.html')}"
               target="_blank" aria-label="Share on Twitter">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-blue-400" fill="currentColor" viewBox="0 0 24 24"><path d="..."/></svg>
            </a>
            <a href="https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.origin + app.url + '.html')}"
               target="_blank" aria-label="Share on LinkedIn">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 24 24"><path d="..."/></svg>
            </a>
            <a href="https://api.whatsapp.com/send?text=${encodeURIComponent(app.name + ' ' + window.location.origin + app.url + '.html')}"
               target="_blank" aria-label="Share on WhatsApp">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-green-500" fill="currentColor" viewBox="0 0 24 24"><path d="..."/></svg>
            </a>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    function showRecommended() {
      const recSec = document.getElementById('recommended');
      const recGrid = document.getElementById('recommended-grid');
      recGrid.innerHTML = '';
      // Simple logic: recommend apps NOT clicked this session
      const clicked = sessionStorage.getItem('clickedApps')?.split(',') || [];
      const recs = apps.filter(a => !clicked.includes(a.name));
      if (!recs.length) return;
      recSec.classList.remove('hidden');
      recs.forEach(app => {
        const card = document.createElement('div');
        card.className = 'bg-white rounded-lg shadow-sm p-4';
        card.innerHTML = `<h3 class="font-semibold">${app.name}</h3>`;
        recGrid.appendChild(card);
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      populateCategoryFilter();
      renderApps();
      document.getElementById('search-input').addEventListener('input', renderApps);
      document.getElementById('category-filter').addEventListener('change', renderApps);

      // Subscribe modal logic
      const modal = document.getElementById('subscribe-modal');
      document.getElementById('subscribe-btn').onclick = () => modal.classList.remove('hidden');
      document.getElementById('close-modal').onclick = () => modal.classList.add('hidden');
      document.getElementById('subscribe-form').onsubmit = e => {
        e.preventDefault();
        dataLayer.push({ event: 'subscribe', email: e.target.email.value });
        modal.classList.add('hidden');
        alert('Thanks for subscribing!');
      };

      // Referral link
      document.getElementById('referral-link').href =
        `https://appsthatmatter.onrender.com/?ref=${refCode}`;
      dataLayer.push({ event: 'page_view', refCode });

      // Track clicks for recommendation
      document.body.addEventListener('click', e => {
        if (e.target.closest('a[onclick*="app_click"]')) {
          const name = e.target.closest('a').onclick
            .toString().match(/'app_click', app: '(.+)'/)[1];
          const clicked = sessionStorage.getItem('clickedApps')?.split(',') || [];
          if (!clicked.includes(name)) {
            clicked.push(name);
            sessionStorage.setItem('clickedApps', clicked.join(','));
          }
          showRecommended();
        }
      });
    });
  </script>
</body>
</html>
