<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Prompt Settings Generator – Apps That Matter</title>
  <meta name="description" content="Generate and customize prompt settings for ChatGPT, Gemini, and Perplexity with this clean, responsive tool." />
  <meta name="keywords" content="prompt builder, AI prompts, ChatGPT settings, Gemini configuration, Perplexity customization, prompt generator" />
  <meta name="author" content="Apps That Matter" />
  <link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <style>
    body {
      font-family: 'Merriweather', serif;
      background: #e0e5ec;
    }
    .neumorphic {
      background: #e0e5ec;
      border-radius: 20px;
      box-shadow: 8px 8px 16px #bebebe, -8px -8px 16px #ffffff;
    }
    .neumorphic-inset {
      box-shadow: inset 8px 8px 16px #bebebe, inset -8px -8px 16px #ffffff;
    }
    .selected {
      background-color: #60a5fa !important;
      color: white !important;
    }
    .floating-btn {
      position: fixed;
      right: 1rem;
      background: #60a5fa;
      color: white;
      padding: 0.5rem 0.75rem;
      border-radius: 9999px;
      font-size: 1.25rem;
      box-shadow: 2px 2px 8px #999;
      z-index: 50;
    }
    .top-btn { bottom: 5rem; }
    .bottom-btn { bottom: 1rem; }
    @media (min-width: 1024px) {
      .scroll-pane {
        max-height: calc(100vh - 150px);
        overflow-y: auto;
      }
    }
  </style>
</head>
<body class="min-h-screen px-4 py-4 md:px-8 md:py-10">
  <header class="fixed top-0 w-full z-20 bg-[#e0e5ec] neumorphic px-4 py-4 md:px-10 md:py-6">
    <div class="max-w-7xl mx-auto px-4 md:px-8">
      <div class="w-full flex justify-between items-center">
        <h1 class="text-2xl font-bold text-center w-full">Prompt Settings Generator</h1>
        <button class="md:hidden text-xl px-2" onclick="toggleMenu()">☰</button>
      </div>
      <div id="mobileMenu" class="mt-4 hidden"></div>
    </div>
  </header>

  <main class="pt-48 px-4 md:px-10 space-y-6 md:space-y-8 max-w-7xl mx-auto">
    <div class="flex flex-col lg:flex-row gap-4">
      <!-- Settings -->
      <section class="neumorphic p-4 sm:p-6 flex-1 scroll-pane">
        <h2 class="text-xl font-bold mb-4">Choose Settings</h2>

        <a href="OpenAI_Exhaustive_Human_Prompt_Settings.xlsx" download class="inline-block mb-2 text-blue-600 underline text-sm hover:text-blue-800">
          ⬇ Download Sample Excel File
        </a>

        <input type="file" id="fileInput" accept=".xlsx" class="p-2 mb-4 rounded w-full neumorphic-inset" />
        <div id="settingsContainer" class="space-y-6"></div>
      </section>

      <!-- Output -->
      <section class="neumorphic p-4 sm:p-6 flex-1 flex flex-col scroll-pane">
        <h2 class="text-xl font-semibold mb-4">Prompt Settings Output</h2>
        <textarea id="outputText" class="min-h-[200px] flex-grow w-full p-3 rounded neumorphic-inset resize-none font-mono text-sm" readonly></textarea>
        <button onclick="copyOutput()" class="mt-4 px-4 py-2 rounded neumorphic hover:bg-blue-500 hover:text-white">Copy Settings</button>
      </section>
    </div>
  </main>

  <button class="floating-btn top-btn" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">⬆</button>
  <button class="floating-btn bottom-btn" onclick="window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth'})">⬇</button>

  <script>
    const fileInput = document.getElementById('fileInput');
    const settingsContainer = document.getElementById('settingsContainer');
    const outputText = document.getElementById('outputText');
    let selectedOptions = {};

    fileInput.addEventListener('change', handleFile);

    function handleFile(e) {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.onload = function (evt) {
        const data = new Uint8Array(evt.target.result);
        const workbook = XLSX.read(data, { type: 'array' });
        const sheet = workbook.Sheets[workbook.SheetNames[0]];
        const json = XLSX.utils.sheet_to_json(sheet, { defval: '' });
        buildSettings(json);
      };
      reader.readAsArrayBuffer(file);
    }

    function buildSettings(data) {
      settingsContainer.innerHTML = '';
      selectedOptions = {};
      data.forEach(row => {
        const settingName = row['Prompt Setting'];
        if (!settingName) return;
        const options = Object.values(row).slice(1, 9).filter(val => val);

        const wrapper = document.createElement('div');
        const label = document.createElement('label');
        label.className = 'block font-medium text-gray-700 mb-2';
        label.textContent = settingName;

        const optionsList = document.createElement('div');
        optionsList.className = 'flex flex-wrap gap-2';

        selectedOptions[settingName] = [];

        options.forEach(option => {
          const btn = document.createElement('button');
          btn.textContent = option;
          btn.className = 'px-3 py-1 rounded neumorphic hover:bg-blue-100';
          btn.onclick = () => {
            const index = selectedOptions[settingName].indexOf(option);
            if (index > -1) {
              selectedOptions[settingName].splice(index, 1);
              btn.classList.remove('selected');
            } else {
              selectedOptions[settingName].push(option);
              btn.classList.add('selected');
            }
            updateOutput();
          };
          optionsList.appendChild(btn);
        });

        wrapper.appendChild(label);
        wrapper.appendChild(optionsList);
        settingsContainer.appendChild(wrapper);
      });
    }

    function updateOutput() {
      let output = '';
      for (const [key, values] of Object.entries(selectedOptions)) {
        if (values.length > 0) {
          output += `${key}: ${values.join(', ')}\n`;
        }
      }
      outputText.value = output.trim();
    }

    function copyOutput() {
      navigator.clipboard.writeText(outputText.value);
      alert('Copied to clipboard!');
    }

    function toggleMenu() {
      const menu = document.getElementById("mobileMenu");
      menu.classList.toggle("hidden");
    }
  </script>
</body>
</html>
